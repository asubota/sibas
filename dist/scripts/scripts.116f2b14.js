"use strict";angular.module("sibasApp",["ui.bootstrap"]),angular.module("sibasApp").controller("MainCtrl",["$scope","Data","bsui","$location","$rootScope",function(a,b,c,d,e){a.reverse=!0,a.sortField="name",a.filtered=[],a.data=[],a.$watch("customText",function(a,b){a!==b&&d.search("search",a)}),a.$watch("type",function(a,b){a!==b&&d.search("type",a)}),b.then(function(b){a.data=b,a.filtered=b,a.types=_.uniq(_.map(b,function(a){return a.type})).sort(),c.updatePicker(),a.byType()}),a.byType=function(){a.filtered=a.type?_.filter(a.data,function(b){return b.type===a.type}):a.data},e.$on("$locationChangeSuccess",function(){var b=d.search().search,c=d.search().type;b&&(a.customText=b),c&&(a.type=c)})}]),angular.module("sibasApp").factory("Data",["$http","$q",function(a,b){var c=b.defer();return a.get("data/data.wiki.ru.json").success(function(a){c.resolve(a)}),c.promise}]),angular.module("sibasApp").service("bsui",["$timeout","$rootElement",function(a,b){var c=b.find(".bs-select");this.updatePicker=function(){a(function(){c.selectpicker("refresh")})}}]),angular.module("sibasApp").filter("regexFilter",function(){var a=function(a,b){var c=new RegExp("^"+b.replace(/\*/g,".+").replace(/\?/g,"."),"g");return function(b){return a[b]?c.test(a[b].toLowerCase()):!1}};return function(b,c){var d;if(b)return c?(d=c.toLowerCase(),b.filter(function(b){var c,e=a(b,d);return c=b.coordinates?b.coordinates.join().indexOf(d)>-1:!1,e("name_ru")||e("name")||c})):b}});